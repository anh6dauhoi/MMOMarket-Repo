<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/MMOMarket/MIGRATION_GUIDE_CATEGORY_STATUS.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MMOMarket/MIGRATION_GUIDE_CATEGORY_STATUS.md" />
              <option name="updatedContent" value="# Hướng dẫn Migration Database - Thêm cột Status cho Categories&#10;&#10;## Mục đích&#10;Thêm cột `status` vào bảng `Categories` để quản lý trạng thái Active/Inactive của các danh mục.&#10;&#10;## Chi tiết thay đổi&#10;&#10;### Cột mới: `status`&#10;- **Kiểu dữ liệu**: `TINYINT(1)`&#10;- **Giá trị mặc định**: `1` (Active)&#10;- **Vị trí**: Sau cột `type`&#10;- **Ý nghĩa**: &#10;  - `1` = Active (Danh mục đang hoạt động)&#10;  - `0` = Inactive (Danh mục bị vô hiệu hóa)&#10;&#10;## Cách chạy Migration&#10;&#10;### Phương pháp 1: Sử dụng MySQL Command Line&#10;&#10;```bash&#10;mysql -u root -p MMO_System &lt; migration_add_status_to_categories.sql&#10;```&#10;&#10;### Phương pháp 2: Sử dụng MySQL Workbench hoặc phpMyAdmin&#10;&#10;1. Mở MySQL Workbench hoặc phpMyAdmin&#10;2. Chọn database `MMO_System`&#10;3. Mở file `migration_add_status_to_categories.sql`&#10;4. Chạy toàn bộ script&#10;&#10;### Phương pháp 3: Chạy thủ công (nếu migration script lỗi)&#10;&#10;```sql&#10;USE MMO_System;&#10;&#10;ALTER TABLE Categories &#10;ADD COLUMN status TINYINT(1) DEFAULT 1 &#10;COMMENT 'Trạng thái hoạt động: 1 - Active, 0 - Inactive' &#10;AFTER type;&#10;&#10;-- Cập nhật giá trị mặc định cho các bản ghi hiện có&#10;UPDATE Categories SET status = 1 WHERE status IS NULL;&#10;```&#10;&#10;## Kiểm tra sau khi Migration&#10;&#10;Chạy câu lệnh sau để kiểm tra:&#10;&#10;```sql&#10;DESCRIBE Categories;&#10;```&#10;&#10;Bạn sẽ thấy cột `status` trong cấu trúc bảng.&#10;&#10;## Rollback (Nếu cần)&#10;&#10;Nếu muốn xóa cột status:&#10;&#10;```sql&#10;ALTER TABLE Categories DROP COLUMN status;&#10;```&#10;&#10;## Ảnh hưởng đến ứng dụng&#10;&#10;✅ **Không ảnh hưởng** - Ứng dụng Java đã được chuẩn bị sẵn:&#10;- Entity `Category.java` đã có field `status`&#10;- Service layer đã có method `toggleCategoryStatus()`&#10;- Controller đã có endpoint `/admin/categories/{id}/toggle-status`&#10;- Frontend đã có nút Active/Inactive&#10;&#10;## Ghi chú&#10;&#10;- Migration script được thiết kế để **an toàn** - không thêm cột nếu đã tồn tại&#10;- Tất cả danh mục hiện có sẽ được set `status = 1` (Active) theo mặc định&#10;- Cột này độc lập với `isDelete` (soft delete)&#10;&#10;---&#10;&#10;**Ngày tạo**: 2025-11-04  &#10;**Phiên bản**: 1.0&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MMOMarket/QUICK_GUIDE_ADD_STATUS.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MMOMarket/QUICK_GUIDE_ADD_STATUS.md" />
              <option name="updatedContent" value="#  HƯỚNG DẪN THÊM CỘT STATUS VÀO CATEGORIES&#10;&#10;## Cột status sẽ thêm vào:&#10;- **Tên**: `status`&#10;- **Kiểu**: `TINYINT(1)` (boolean trong MySQL)&#10;- **Default**: `1` (Active)&#10;- **Vị trí**: Sau cột `type`&#10;&#10;##  Giá trị:&#10;- `1` hoặc `true` = **Active** (Danh mục đang hoạt động)&#10;- `0` hoặc `false` = **Inactive** (Danh mục tạm ngưng)&#10;&#10;---&#10;&#10;## ⚡ CÁCH CHẠY - Chọn 1 trong 3 cách&#10;&#10;###  CÁCH 1: Qua MySQL Command Line (Khuyến nghị)&#10;&#10;```bash&#10;# Mở Command Prompt hoặc Terminal&#10;cd &quot;C:\Users\ADMIN\Desktop\New folder (2)\MMOMarket-Repo\MMOMarket&quot;&#10;&#10;# Chạy migration&#10;mysql -u root -p MMO_System &lt; add_status_column.sql&#10;&#10;# Nếu báo lỗi, thử:&#10;mysql -u root -p MMO_System &lt; add_status_simple.sql&#10;```&#10;&#10;###  CÁCH 2: Qua MySQL Workbench&#10;&#10;1. Mở MySQL Workbench&#10;2. Connect vào database `MMO_System`&#10;3. File → Open SQL Script → Chọn file `add_status_column.sql`&#10;4. Click nút ⚡ Execute&#10;5. Kiểm tra kết quả&#10;&#10;###  CÁCH 3: Copy-Paste vào phpMyAdmin hoặc MySQL Workbench&#10;&#10;```sql&#10;USE MMO_System;&#10;&#10;ALTER TABLE Categories &#10;ADD COLUMN status TINYINT(1) NOT NULL DEFAULT 1 &#10;COMMENT 'Trạng thái: 1=Active, 0=Inactive' &#10;AFTER type;&#10;&#10;UPDATE Categories SET status = 1;&#10;&#10;DESCRIBE Categories;&#10;```&#10;&#10;---&#10;&#10;## ✅ KIỂM TRA SAU KHI CHẠY&#10;&#10;### Xem cấu trúc bảng:&#10;```sql&#10;DESCRIBE Categories;&#10;```&#10;&#10;**Kết quả mong đợi** - Bạn sẽ thấy dòng:&#10;```&#10;status | tinyint(1) | NO | | 1 |&#10;```&#10;&#10;### Xem dữ liệu:&#10;```sql&#10;SELECT id, name, type, status, isDelete FROM Categories LIMIT 5;&#10;```&#10;&#10;---&#10;&#10;##  NẾU GẶP LỖI&#10;&#10;### Lỗi: &quot;Duplicate column name 'status'&quot;&#10;➡️ **Nguyên nhân**: Cột đã tồn tại rồi&#10;✅ **Giải pháp**: Không cần làm gì, đã OK!&#10;&#10;### Lỗi: &quot;Table 'Categories' doesn't exist&quot;&#10;➡️ **Nguyên nhân**: Chưa tạo database&#10;✅ **Giải pháp**: Chạy file `MMOMarket.sql` trước&#10;&#10;### Lỗi: &quot;Access denied&quot;&#10;➡️ **Nguyên nhân**: Không có quyền&#10;✅ **Giải pháp**: Dùng user `root` hoặc user có quyền ALTER TABLE&#10;&#10;---&#10;&#10;##  FILES MIGRATION&#10;&#10;1. ✅ `add_status_column.sql` - Script chính (có kiểm tra)&#10;2. ✅ `add_status_simple.sql` - Script đơn giản (backup)&#10;3. ✅ `MMOMarket.sql` - Đã update (dùng cho DB mới)&#10;&#10;---&#10;&#10;##  SAU KHI CHẠY MIGRATION&#10;&#10;Ứng dụng Java sẽ tự động hoạt động với cột status vì:&#10;- ✅ Entity `Category.java` đã có field `status`&#10;- ✅ Service đã có method `toggleCategoryStatus()`&#10;- ✅ API endpoint sẵn sàng: `PUT /admin/categories/{id}/toggle-status`&#10;&#10;**Không cần restart app** nếu đang chạy, JPA sẽ tự detect cột mới!&#10;&#10;---&#10;&#10;##  HỖ TRỢ&#10;&#10;Nếu gặp vấn đề, check:&#10;1. MySQL đang chạy chưa?&#10;2. Database `MMO_System` đã tồn tại chưa?&#10;3. User có quyền ALTER TABLE chưa?&#10;&#10;---&#10;&#10;**Cập nhật**: 2024-11-04  &#10;**Trạng thái**: ✅ READY TO RUN&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MMOMarket/add_status_simple.sql">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MMOMarket/add_status_simple.sql" />
              <option name="updatedContent" value="-- ========================================&#10;-- SIMPLE Migration: Thêm cột STATUS vào Categories&#10;-- Chạy script này nếu add_status_column.sql báo lỗi&#10;-- ========================================&#10;&#10;USE MMO_System;&#10;&#10;-- Cách 1: Thêm cột status (nếu chưa có sẽ thêm, nếu có rồi sẽ báo lỗi - bỏ qua lỗi)&#10;ALTER TABLE Categories &#10;ADD COLUMN status TINYINT(1) NOT NULL DEFAULT 1 &#10;COMMENT 'Trạng thái: 1=Active, 0=Inactive' &#10;AFTER type;&#10;&#10;-- Đảm bảo tất cả records có status = 1&#10;UPDATE Categories SET status = 1;&#10;&#10;-- Xem kết quả&#10;DESCRIBE Categories;&#10;SELECT * FROM Categories LIMIT 5;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MMOMarket/run_migration.bat">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MMOMarket/run_migration.bat" />
              <option name="updatedContent" value="@echo off&#10;REM ========================================&#10;REM Auto Migration Script - Add Status Column&#10;REM ========================================&#10;&#10;echo.&#10;echo ========================================&#10;echo   ADDING STATUS COLUMN TO CATEGORIES&#10;echo ========================================&#10;echo.&#10;&#10;REM Thiết lập thông tin MySQL&#10;set MYSQL_USER=root&#10;set MYSQL_DB=MMO_System&#10;set SCRIPT_FILE=add_status_column.sql&#10;&#10;echo [1/4] Checking MySQL connection...&#10;mysql -u %MYSQL_USER% -p -e &quot;SELECT 'MySQL connected successfully!' AS status;&quot;&#10;if errorlevel 1 (&#10;    echo [ERROR] Cannot connect to MySQL!&#10;    echo Please check:&#10;    echo   - MySQL is running&#10;    echo   - Username is correct&#10;    echo   - Password is correct&#10;    pause&#10;    exit /b 1&#10;)&#10;&#10;echo.&#10;echo [2/4] Checking database MMO_System...&#10;mysql -u %MYSQL_USER% -p -e &quot;USE MMO_System; SELECT 'Database exists!' AS status;&quot;&#10;if errorlevel 1 (&#10;    echo [ERROR] Database MMO_System not found!&#10;    echo Please create database first.&#10;    pause&#10;    exit /b 1&#10;)&#10;&#10;echo.&#10;echo [3/4] Running migration script...&#10;mysql -u %MYSQL_USER% -p %MYSQL_DB% &lt; %SCRIPT_FILE%&#10;if errorlevel 1 (&#10;    echo [WARNING] Migration may have failed or column already exists&#10;    echo Trying simple script...&#10;    mysql -u %MYSQL_USER% -p %MYSQL_DB% &lt; add_status_simple.sql&#10;)&#10;&#10;echo.&#10;echo [4/4] Verifying results...&#10;mysql -u %MYSQL_USER% -p %MYSQL_DB% -e &quot;DESCRIBE Categories; SELECT id, name, type, status FROM Categories LIMIT 3;&quot;&#10;&#10;echo.&#10;echo ========================================&#10;echo   MIGRATION COMPLETED!&#10;echo ========================================&#10;echo.&#10;echo Status column has been added to Categories table.&#10;echo.&#10;pause&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MMOMarket/src/main/resources/templates/customer/wishlist.html">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MMOMarket/src/main/resources/templates/customer/wishlist.html" />
              <option name="updatedContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;title&gt;My Wishlist&lt;/title&gt;&#10;    &lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;&#10;&lt;/head&gt;&#10;&lt;body class=&quot;bg-gray-50&quot;&gt;&#10;&lt;div th:replace=&quot;~{fragments/header :: header(active='account')}&quot;&gt;&lt;/div&gt;&#10;&#10;&lt;main class=&quot;max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10&quot;&gt;&#10;    &lt;div class=&quot;grid grid-cols-1 lg:grid-cols-4 gap-8&quot;&gt;&#10;        &lt;aside class=&quot;lg:col-span-1&quot;&gt;&#10;            &lt;div class=&quot;bg-white rounded-lg shadow p-6&quot;&gt;&#10;                &lt;h2 class=&quot;text-2xl font-bold mb-6&quot;&gt;Account Setting&lt;/h2&gt;&#10;                &lt;div class=&quot;flex items-center space-x-4 mb-6&quot;&gt;&#10;                    &lt;div class=&quot;w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center text-xl font-bold text-gray-600&quot;&#10;                         th:text=&quot;${displayName != null and #strings.length(displayName) &gt; 0 ? #strings.toUpperCase(#strings.substring(displayName,0,1)) : 'C'}&quot;&gt;&lt;/div&gt;&#10;                    &lt;span class=&quot;font-semibold text-lg&quot; th:text=&quot;${displayName}&quot;&gt;customer&lt;/span&gt;&#10;                &lt;/div&gt;&#10;                &lt;nav class=&quot;space-y-2&quot;&gt;&#10;                    &lt;a class=&quot;flex items-center space-x-3 px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg&quot; href=&quot;#&quot;&gt;&#10;                        &lt;span&gt;My Profile&lt;/span&gt;&#10;                    &lt;/a&gt;&#10;                    &lt;a class=&quot;flex items-center space-x-3 px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg&quot; href=&quot;#&quot;&gt;&#10;                        &lt;span&gt;My Order&lt;/span&gt;&#10;                    &lt;/a&gt;&#10;                    &lt;a class=&quot;flex items-center space-x-3 px-4 py-2 text-white bg-red-500 rounded-lg&quot; th:href=&quot;@{/account/wishlist}&quot;&gt;&#10;                        &lt;span&gt;My Wishlist&lt;/span&gt;&#10;                    &lt;/a&gt;&#10;                    &lt;a class=&quot;flex items-center space-x-3 px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg&quot; href=&quot;#&quot;&gt;&#10;                        &lt;span&gt;My Complaints&lt;/span&gt;&#10;                    &lt;/a&gt;&#10;                    &lt;a class=&quot;flex items-center space-x-3 px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg&quot; th:href=&quot;@{/account/notifications}&quot;&gt;&#10;                        &lt;span&gt;My Notifications&lt;/span&gt;&#10;                    &lt;/a&gt;&#10;                &lt;/nav&gt;&#10;            &lt;/div&gt;&#10;        &lt;/aside&gt;&#10;&#10;        &lt;section class=&quot;lg:col-span-3&quot;&gt;&#10;            &lt;div class=&quot;bg-white rounded-xl border border-gray-200 p-6 shadow-sm&quot;&gt;&#10;                &lt;div class=&quot;flex items-center justify-between mb-4&quot;&gt;&#10;                    &lt;h1 class=&quot;text-2xl font-bold&quot;&gt;My Wishlist&lt;/h1&gt;&#10;                    &lt;div th:if=&quot;${param.removed}&quot;&gt;&#10;                        &lt;span class=&quot;text-green-600 text-sm font-medium&quot;&gt;Item removed.&lt;/span&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div th:if=&quot;${#lists.isEmpty(items)}&quot; class=&quot;text-gray-500&quot;&gt;&#10;                    Your wishlist is empty.&#10;                &lt;/div&gt;&#10;&#10;                &lt;div th:unless=&quot;${#lists.isEmpty(items)}&quot; class=&quot;grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6&quot;&gt;&#10;                    &lt;div th:each=&quot;it : ${items}&quot; class=&quot;border rounded-xl overflow-hidden bg-white shadow-sm&quot;&gt;&#10;                        &lt;a th:with=&quot;p=${it['product']}&quot; th:href=&quot;@{/products(id=${p.id})}&quot;&gt;&#10;                            &lt;img th:src=&quot;${p.image != null ? p.image : '/images/default.jpg'}&quot; alt=&quot;Product Image&quot; class=&quot;w-full h-44 object-cover&quot;&gt;&#10;                        &lt;/a&gt;&#10;                        &lt;div class=&quot;p-4&quot;&gt;&#10;                            &lt;h3 class=&quot;font-semibold text-gray-900 truncate&quot;&gt;&#10;                                &lt;a th:with=&quot;p=${it['product']}&quot; th:text=&quot;${p.name}&quot; th:href=&quot;@{/products(id=${p.id})}&quot;&gt;Product&lt;/a&gt;&#10;                            &lt;/h3&gt;&#10;                            &lt;div class=&quot;mt-2 flex items-center justify-between&quot;&gt;&#10;                                &lt;form th:action=&quot;@{/wishlist/remove}&quot; method=&quot;post&quot;&gt;&#10;                                    &lt;input type=&quot;hidden&quot; name=&quot;productId&quot; th:value=&quot;${it['product'].id}&quot;&gt;&#10;                                    &lt;input type=&quot;hidden&quot; th:name=&quot;${_csrf.parameterName}&quot; th:value=&quot;${_csrf.token}&quot;&gt;&#10;                                    &lt;button type=&quot;submit&quot; class=&quot;text-red-600 text-sm hover:underline&quot;&gt;Remove&lt;/button&gt;&#10;                                &lt;/form&gt;&#10;                                &lt;a class=&quot;text-sm text-blue-600 hover:underline&quot; th:href=&quot;@{/products(id=${it['product'].id})}&quot;&gt;View&lt;/a&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;&#10;            &lt;/div&gt;&#10;        &lt;/section&gt;&#10;    &lt;/div&gt;&#10;&lt;/main&gt;&#10;&#10;&lt;div th:replace=&quot;~{fragments/footer :: footer}&quot;&gt;&lt;/div&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>